<ResourceDictionary
    x:Class="NINA.Plugin.SolveEveryLight.Options"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ns="clr-namespace:NINA.Core.Locale;assembly=NINA.Core"
    xmlns:rules="clr-namespace:NINA.Core.Utility.ValidationRules;assembly=NINA.Core">
    <!--  This data template will be displayed in N.I.N.A. on the options->plugin tab with the datacontext of the TestPlugin instance  -->
    <!--  In order for this datatemplate to be picked correctly, the key has to follow the naming convention of <IPlugin.Name>_Options -->
    <!--  Furthermore the Resource Dictionary has to be exported via code behind export attributes  -->
    <DataTemplate x:Key="Solve Every Light_Options">

        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="190" />
                <!--  Label column  -->
                <ColumnDefinition Width="*" />
                <!--  Control column  -->
            </Grid.ColumnDefinitions>

            <!--  Plugin Enable  -->
            <TextBlock
                Grid.Row="0"
                Grid.Column="0"
                Margin="0,2"
                VerticalAlignment="Center"
                Text="Plugin enabled">
                <TextBlock.ToolTip>When the plugin is enabled, LIGHT frames will be plate-solved and the astrometric solution be written to the header. Set to Off to disable.</TextBlock.ToolTip>
            </TextBlock>
            <CheckBox
                Grid.Row="0"
                Grid.Column="1"
                MinWidth="40"
                Margin="0,2"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                IsChecked="{Binding PluginEnabled}">
                <CheckBox.ToolTip>
                    When the plugin is enabled, LIGHT frames will be plate-solved and the astrometric solution be written to the header. Set to Off to disable.
                </CheckBox.ToolTip>
            </CheckBox>

            <!--  Snapshot Option  -->
            <TextBlock
                Grid.Row="1"
                Grid.Column="0"
                Margin="0,2"
                VerticalAlignment="Center"
                Text="Include snapshots">
                <TextBlock.ToolTip>When enabled, SNAPSHOTS will also be plate solved and the astrometric solution be written to the header. Set to Off to disable solving for SNAPSHOTS.</TextBlock.ToolTip>
            </TextBlock>
            <CheckBox
                Grid.Row="1"
                Grid.Column="1"
                MinWidth="40"
                Margin="0,2"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                IsChecked="{Binding SnapshotsEnabled}"
                IsEnabled="{Binding PluginEnabled}">
                <CheckBox.ToolTip>When enabled, SNAPSHOTS will also be plate solved and the astrometric solution be written to the header. Set to Off to disable solving for SNAPSHOTS.</CheckBox.ToolTip>
            </CheckBox>

            <!--  Notifications  -->
            <TextBlock
                Grid.Row="2"
                Grid.Column="0"
                Margin="0,2"
                VerticalAlignment="Center"
                Text="Show solver notifications">
                <TextBlock.ToolTip>When enabled, solver notifications will be show.</TextBlock.ToolTip>
            </TextBlock>
            <CheckBox
                Grid.Row="2"
                Grid.Column="1"
                MinWidth="40"
                Margin="0,2"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                IsChecked="{Binding NotificationsEnabled}"
                IsEnabled="{Binding PluginEnabled}">
                <CheckBox.ToolTip>When enabled, solver notifications will be show.</CheckBox.ToolTip>
            </CheckBox>

            <!--  Optimized Solver explanation  -->
            <TextBlock
                Grid.Row="3"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                Margin="0,20,0,5"
                HorizontalAlignment="left"
                VerticalAlignment="Center"
                FontWeight="Bold">
                <TextBlock.Text>
                    Enabling below optimized solver settings potentially improves solver performance, while keeping the global plate solver configuration under Options>Plate Solving unmodified.
                </TextBlock.Text>
            </TextBlock>

            <!--  Optimized Solver Parameter  -->
            <TextBlock
                Grid.Row="4"
                Grid.Column="0"
                Margin="0,2"
                VerticalAlignment="Center"
                Text="Use optimized solver settings">
                <TextBlock.ToolTip>When enabled, below solver settings will used instead of the general platesolver settings.</TextBlock.ToolTip>
            </TextBlock>
            <CheckBox
                Grid.Row="4"
                Grid.Column="1"
                MinWidth="40"
                Margin="0,2"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                IsChecked="{Binding OptimizedSolverParameterEnabled}"
                IsEnabled="{Binding PluginEnabled}" />

            <!--  DownSample Factor  -->
            <TextBlock
                Grid.Row="5"
                Grid.Column="0"
                Margin="0,2"
                VerticalAlignment="Center"
                Text="{ns:Loc LblDownSampleFactor}" />
            <TextBox
                Grid.Row="5"
                Grid.Column="1"
                Width="40"
                MinWidth="40"
                Margin="0,2"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                IsEnabled="{Binding OptimizedSolverParameterEnabled}">
                <TextBox.Text>
                    <Binding Path="DownSampleFactor" UpdateSourceTrigger="LostFocus">
                        <Binding.ValidationRules>
                            <rules:DoubleRangeRule>
                                <rules:DoubleRangeRule.ValidRange>
                                    <rules:DoubleRangeChecker Maximum="4" Minimum="1" />
                                </rules:DoubleRangeRule.ValidRange>
                            </rules:DoubleRangeRule>
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>

            <!--  Search Radius  -->
            <TextBlock
                Grid.Row="6"
                Grid.Column="0"
                Margin="0,2"
                VerticalAlignment="Center"
                Text="{ns:Loc LblSearchRadius}" />
            <TextBox
                Grid.Row="6"
                Grid.Column="1"
                Width="40"
                MinWidth="40"
                Margin="0,2"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                IsEnabled="{Binding OptimizedSolverParameterEnabled}">
                <TextBox.Text>
                    <Binding Path="SearchRadius" UpdateSourceTrigger="LostFocus">
                        <Binding.ValidationRules>
                            <rules:GreaterZeroRule />
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>

            <!--  Max Objects  -->
            <TextBlock
                Grid.Row="7"
                Grid.Column="0"
                Margin="0,2"
                VerticalAlignment="Center"
                Text="{ns:Loc LblMaxObjects}" />
            <TextBox
                Grid.Row="7"
                Grid.Column="1"
                Width="40"
                MinWidth="40"
                Margin="0,2"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                IsEnabled="{Binding OptimizedSolverParameterEnabled}">
                <TextBox.Text>
                    <Binding Path="MaxObjects" UpdateSourceTrigger="LostFocus">
                        <Binding.ValidationRules>
                            <rules:GreaterZeroRule />
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>
        </Grid>
    </DataTemplate>
</ResourceDictionary>